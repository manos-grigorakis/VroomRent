import{u as U,h as j,i as _,j as V,e as y,a as l,d as h,w as g,b as u,n as F,t as p,k as n,g as o,l as L,f as d,m as v}from"./index-dlVRCVJv.js";import{F as M}from"./FormWrapper-BVf3UkIF.js";import{_ as w}from"./BaseInput-gOZxOp-4.js";const S=o("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[o("h2",{class:"text-center text-2xl font-bold leading-9 text-gray-900"},"Create a new Account")],-1),T={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},A={class:"flex flex-col gap-6 sm:flex-row sm:justify-between"},q={class:""},O={key:0,class:"text-red-default text-sm"},D={class:""},P={key:0,class:"text-red-default text-sm"},$={key:0,class:"text-red-default text-sm"},z={key:1,class:"text-red-default text-sm"},W={class:"mt-10 text-center text-sm text-gray-500"},G={__name:"RegisterComponent",setup(k){const x=U(),b=j(),t=_({firstName:"",lastName:"",email:"",password:""}),e=_({firstName:"",lastName:"",email:"",password:""}),r=_({firstName:!1,lastName:!1,email:!1,password:!1}),m=_({firstName:!1,lastName:!1,email:!1,password:!1}),N=V(!1),f=V(!1),c=V(""),I=()=>{let s=!0;return Object.keys(e).forEach(a=>{e[a]=""}),Object.keys(r).forEach(a=>{r[a]=!1}),t.firstName||(e.firstName="First name is required",r.firstName=!0,s=!1),t.lastName||(e.lastName="Last name is required",r.lastName=!0,s=!1),t.email||(e.email="Email is required",r.email=!0,s=!1),t.password||(e.password="Password is required",r.password=!0,s=!1),s},B=async()=>{if(I()){f.value=!0,Object.keys(e).forEach(s=>{e[s]=""});try{x.commit("setUserData",t),await x.dispatch("registerUser",{password:t.password}),c.value="Registration successfull!",N.value=!0,Object.keys(m).forEach(s=>{m[s]=!0}),setTimeout(()=>{b.push("/login")},1500)}catch(s){N.value=!1,s.message==="User with this email already exists"&&(r.email=!0),c.value=s.message}finally{f.value=!1}}};return(s,a)=>{const C=y("BaseSpinner"),E=y("AccentButton"),R=y("RouterLink");return l(),h(M,null,{default:g(()=>[S,c.value?(l(),u("span",{key:0,class:F(["text-center mt-8 rounded bg-transparent text-white font-medium py-2 sm:mx-auto sm:w-full sm:max-w-sm drop-shadow-sm",N.value?"bg-green":"bg-red-default"])},p(c.value),3)):n("",!0),o("div",T,[f.value?(l(),h(C,{key:0})):n("",!0),o("form",{onSubmit:L(B,["prevent"]),class:"space-y-6"},[o("div",A,[o("div",q,[d(w,{labelValue:"First Name",inputType:"text",inputId:"firstName",modelValue:t.firstName,"onUpdate:modelValue":a[0]||(a[0]=i=>t.firstName=i),modelModifiers:{trim:!0},errorInput:r.firstName,inputValidated:m.firstName},null,8,["modelValue","errorInput","inputValidated"]),e.firstName?(l(),u("span",O,p(e.firstName),1)):n("",!0)]),o("div",D,[d(w,{labelValue:"Last Name",inputType:"text",inputId:"lastName",modelValue:t.lastName,"onUpdate:modelValue":a[1]||(a[1]=i=>t.lastName=i),modelModifiers:{trim:!0},errorInput:r.lastName,inputValidated:m.lastName},null,8,["modelValue","errorInput","inputValidated"]),e.lastName?(l(),u("span",P,p(e.lastName),1)):n("",!0)])]),d(w,{labelValue:"Email Address",inputType:"email",inputId:"email",modelValue:t.email,"onUpdate:modelValue":a[2]||(a[2]=i=>t.email=i),modelModifiers:{trim:!0},errorInput:r.email,inputValidated:m.email},null,8,["modelValue","errorInput","inputValidated"]),e.email?(l(),u("span",$,p(e.email),1)):n("",!0),d(w,{labelValue:"Password",inputType:"password",inputId:"password",modelValue:t.password,"onUpdate:modelValue":a[3]||(a[3]=i=>t.password=i),modelModifiers:{trim:!0},errorInput:r.password,inputValidated:m.password},null,8,["modelValue","errorInput","inputValidated"]),e.password?(l(),u("span",z,p(e.password),1)):n("",!0),d(E,{widthClass:"w-full",disabled:f.value},{default:g(()=>[v("Register")]),_:1},8,["disabled"])],32),o("p",W,[v(" Already have an account? "),d(R,{class:"font-medium leading-6 hover:underline",to:"/login"},{default:g(()=>[v("Login")]),_:1})])])]),_:1})}}},Q={__name:"RegisterView",setup(k){return(x,b)=>(l(),h(G))}};export{Q as default};
