import{u as S,i as u,j as _,e as w,a as n,d as V,w as g,b as v,n as j,t as x,k as m,g as r,l as F,f as c,m as h}from"./index-dlVRCVJv.js";import{F as M}from"./FormWrapper-BVf3UkIF.js";import{_ as b}from"./BaseInput-gOZxOp-4.js";const N=r("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[r("h2",{class:"text-center text-2xl font-semibold"},"Login to your account")],-1),P={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-sm"},T={class:""},U={key:0,class:"text-red-default text-sm"},A={class:""},D={key:0,class:"text-red-default text-sm"},O={class:"mt-10 text-center text-sm"},R={__name:"LoginComponent",setup(k){const y=S(),s=u({email:"",password:""}),a=u({email:"",password:""}),t=u({email:!1,password:!1}),i=u({email:!1,password:!1}),l=_(""),p=_(!1),d=_(!1),B=()=>{let e=!0;return Object.keys(a).forEach(o=>{a[o]=""}),Object.keys(t).forEach(o=>{t[o]=!1}),s.email||(a.email="Email is required",t.email=!0,e=!1),s.password||(a.password="Password is required",t.password=!0,e=!1),e},I=async()=>{if(B()){d.value=!0;try{await y.dispatch("loginUser",s),l.value="Login successfully!",p.value=!0,Object.keys(i).forEach(e=>{i[e]=!0}),setTimeout(()=>{window.location.href="/home"},200)}catch(e){p.value=!1,e.message==="User not found"?(l.value=e.message,t.email=!0):e.message==="Wrong Password"&&(l.value=e.message,t.password=!0),l.value=e.message}finally{d.value=!1}}};return(e,o)=>{const L=w("BaseSpinner"),C=w("AccentButton"),E=w("RouterLink");return n(),V(M,null,{default:g(()=>[N,l.value?(n(),v("span",{key:0,class:j(["text-center mt-8 rounded bg-transparent text-white font-medium py-2 sm:mx-auto sm:w-full sm:max-w-sm drop-shadow-sm",p.value?"bg-green":"bg-red-default"])},x(l.value),3)):m("",!0),r("div",P,[d.value?(n(),V(L,{key:0})):m("",!0),r("form",{onSubmit:F(I,["prevent"]),class:"space-y-6"},[r("div",T,[c(b,{labelValue:"Email Address",inputType:"email",inputId:"email",modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=f=>s.email=f),modelModifiers:{trim:!0},errorInput:t.email,inputValidated:i.email},null,8,["modelValue","errorInput","inputValidated"]),a.email?(n(),v("span",U,x(a.email),1)):m("",!0)]),r("div",A,[c(b,{labelValue:"Password",inputType:"password",inputId:"password",modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=f=>s.password=f),modelModifiers:{trim:!0},errorInput:t.password,inputValidated:i.password,forgotPassword:""},null,8,["modelValue","errorInput","inputValidated"]),a.password?(n(),v("span",D,x(a.password),1)):m("",!0)]),c(C,{widthClass:"w-full",disabled:d.value},{default:g(()=>[h("Login")]),_:1},8,["disabled"])],32),r("p",O,[h(" Don't have an account? "),c(E,{class:"font-medium leading-6 hover:underline",to:"/register"},{default:g(()=>[h(" Register ")]),_:1})])])]),_:1})}}},z={__name:"LoginView",setup(k){return(y,s)=>(n(),V(R))}};export{z as default};
