import{p as b,h as B,j as l,e as d,a as n,d as i,w as p,g as u,k as f,l as k,f as _,b as P,t as E,m as F,q as I}from"./index-dlVRCVJv.js";import{F as q}from"./FormWrapper-BVf3UkIF.js";import{_ as C}from"./BaseInput-gOZxOp-4.js";const N=u("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[u("h2",{class:"text-center text-2xl font-semibold"},"Forgot Password")],-1),S={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-sm"},$={key:0,class:"text-red-default text-sm"},M={__name:"ForgotPassword",setup(v){const t=b(),m=B(),e=l(""),a=l(!1),s=l(""),r=l(!1),w=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,h=()=>{if(a.value=!1,s.value="",e.value){if(!w.test(e.value))return s.value="Invalid email format",a.value=!0,!1}else return s.value="Email is required",a.value=!0,!1;return!0},x=async()=>{if(h()){r.value=!0;try{await I.post("https://vroomrent-1ca5fd89bbcf.herokuapp.com/auth/request-reset-password",{email:e.value}),t("Password reset email sent",{type:"success"}),m.push("/login")}catch(o){if(o.response&&o.response.status===404)return t("User with this email address doesn't exist",{type:"error"});console.error("Error sending password reset email: ",o),t("Error sending password reset email",{type:"error"})}finally{r.value=!1}}};return(o,c)=>{const y=d("BaseSpinner"),g=d("AccentButton");return n(),i(q,null,{default:p(()=>[N,u("div",S,[r.value?(n(),i(y,{key:0})):f("",!0),u("form",{onSubmit:k(x,["prevent"]),class:"space-y-6"},[_(C,{labelValue:"Please enter your email to change your password",inputType:"email",inputId:"email",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=V=>e.value=V),modelModifiers:{trim:!0},errorInput:a.value},null,8,["modelValue","errorInput"]),s.value?(n(),P("span",$,E(s.value),1)):f("",!0),_(g,{widthClass:"w-full",disabled:r.value},{default:p(()=>[F("Request Email")]),_:1},8,["disabled"])],32)])]),_:1})}}},U={__name:"ForgotPasswordView",setup(v){return(t,m)=>(n(),i(M))}};export{U as default};
